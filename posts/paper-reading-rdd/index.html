<!doctype html><html lang=zh><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content=#ffffff name=theme-color><meta content=#da532c name=msapplication-TileColor><link href=/icons/site.webmanifest rel=manifest><link color=#5bbad5 href=/icons/safari-pinned-tab.svg rel=mask-icon><link href=/icons/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link href=/icons/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=/icons/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link crossorigin=anonymous href=https://cdn.jsdelivr.net/npm/galleria@1.6.1/dist/themes/folio/galleria.folio.min.css integrity=sha384-+rY0QD+LRnTOquDMzGa9lXU6jIwdiQuwCJQ2cdcW0qeP/0UbjQCZlXnRsUMA+9pH rel=stylesheet><link crossorigin=anonymous href=https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1.9.1/css/academicons.min.css integrity=sha384-FIue+PI4SsI9XfHCz8dBLg33b0c1fMJgNU3X//L26FYbGnlSEfWmNT7zgWc2N9b6 rel=stylesheet><link crossorigin=anonymous href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css integrity=sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm rel=stylesheet><link crossorigin=anonymous href=https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css integrity=sha384-IJLmUY0f1ePPX6uSCJ9Bxik64/meJmjSYD7dHaJqTXXEBE4y+Oe9P2KBZa/z7p0Q rel=stylesheet><link href=https://charmer.fun/deep-thought.css rel=stylesheet><title> Aurora | 论文阅读笔记：RDD </title><script src="https://www.googletagmanager.com/gtag/js?id=G-LXDSXGWDES" async></script><script>window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());
    gtag("config", "G-LXDSXGWDES");</script><link crossorigin=anonymous href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs rel=stylesheet><script crossorigin=anonymous defer integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js></script><script crossorigin=anonymous defer integrity=sha384-jiBVvJ8NGGj5n7kJaiWwWp9AjC+Yh8rhZY3GtAX8yU28azcLgoRo4oukO87g7zDT src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/mathtex-script-type.min.js></script><script crossorigin=anonymous defer integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js></script><body class=has-background-white><nav aria-label="section navigation" class="navbar is-light" role=navigation><div class=container><div class=navbar-brand><a class="navbar-item is-size-5 has-text-weight-bold" href=https://charmer.fun>Aurora</a><a class="navbar-burger burger" aria-expanded=false aria-label=menu data-target=navMenu role=button> <span aria-hidden=true></span> <span aria-hidden=true></span> <span aria-hidden=true></span> </a></div><div class=navbar-menu id=navMenu><div class="navbar-end has-text-centered"><a class="navbar-item has-text-weight-semibold" href=https://charmer.fun/> Home </a><a class="navbar-item has-text-weight-semibold" href=https://charmer.fun/posts> Posts </a><a class="navbar-item has-text-weight-semibold" href=https://charmer.fun/categories> Categories </a><a class="navbar-item has-text-weight-semibold" href=https://charmer.fun/tags> Tags </a><a class=navbar-item data-target=#search-modal id=nav-search title=Search> <span class=icon> <i class="fas fa-search"></i> </span> </a><a title="Switch to dark theme" class=navbar-item id=dark-mode> <span class=icon> <i class="fas fa-adjust"></i> </span> </a></div></div></div></nav><section class=section><div class=container><div class=columns><div class="column is-8 is-offset-2"><article class=box><h1 class=title>论文阅读笔记：RDD</h1><p class=subtitle>Matei Zaharia, Mosharaf Chowdhury, Tathagata Das, Ankur Dave, Justin Ma, Murphy McCauley, Michael J. Franklin, Scott Shenker, Ion Stoica. Resilient Distributed Datasets: A Fault-Tolerant Abstraction for In-Memory Cluster Computing<div class="columns is-multiline is-gapless"><div class="column is-8"><span class="icon-text has-text-grey"> <span class=icon> <i class="fas fa-user"></i> </span> <span>charmer published on</span> <span class=icon> <i class="far fa-calendar-alt"></i> </span> <span><time datetime=2021-10-12T17:31:07+08:00>October 12, 2021</time></span> </span></div><div class="column is-4 has-text-right-desktop"><span class="icon-text has-text-grey"> <span class=icon> <i class="far fa-clock"></i> </span> <span>4 min,</span> <span class=icon> <i class="fas fa-pencil-alt"></i> </span> <span>695 words</span> </span></div><div class=column><p>Categories: <a class="has-text-info-dark has-text-weight-semibold" href=https://charmer.fun/categories/notes/> <span class=icon-text> <span class=icon> <i class="fas fa-cube"></i> </span> <span>Notes</span> </span> </a></div><div class="column has-text-right-desktop"><p>Tags: <a class="has-text-info-dark has-text-weight-semibold" href=https://charmer.fun/tags/paper-reading/> <span class=icon-text> <span class=icon> <i class="fas fa-tag"></i> </span> <span>paper reading</span> </span> </a> <a class="has-text-info-dark has-text-weight-semibold" href=https://charmer.fun/tags/note/> <span class=icon-text> <span class=icon> <i class="fas fa-tag"></i> </span> <span>note</span> </span> </a> <a class="has-text-info-dark has-text-weight-semibold" href=https://charmer.fun/tags/spark/> <span class=icon-text> <span class=icon> <i class="fas fa-tag"></i> </span> <span>spark</span> </span> </a> <a class="has-text-info-dark has-text-weight-semibold" href=https://charmer.fun/tags/apache/> <span class=icon-text> <span class=icon> <i class="fas fa-tag"></i> </span> <span>apache</span> </span> </a> <a class="has-text-info-dark has-text-weight-semibold" href=https://charmer.fun/tags/big-data/> <span class=icon-text> <span class=icon> <i class="fas fa-tag"></i> </span> <span>big data</span> </span> </a></div></div><div class="content mt-2"><h2 id=abstract>Abstract</h2><p>RDD起源于现有的大数据框架对<ol><li>迭代算法: 数据复用<li>交互式数据<li>挖掘: 数据共享</ol><p>支持过差<h2 id=introduction>Introduction</h2><p>新提出的Pregel、HaLoop虽然依次针对性提出解决方案，但是方案缺乏统一的抽象接口，无法推广。<p>于是，研究人员提出RDD，支持大量场景下内存复用。<blockquote><p>Resilient Distributed Datasets(RDDs): RDDS are fault-tolerant, parallel data structures that enable users explicitly persist intermediate results in memory, control their partitioning to optimize data placement, and manaipulate them using a rich set of operations.</blockquote><p>最大难题是设计接口，如何设计错误容忍度高的接口呢？参考现有设计，DSM、KV-stores、databases和Piccolo，他们提供细粒度内存接口，导致想要支持错误恢复，必须：<ol><li>跨设备备份数据<li>跨设备日志更新</ol><p>这对于大数据应用而言太昂贵了，于是，RDD被设计为粗粒度内存模型接口，提供transformations接口对不同数据执行某些操作操作。此时，备份变得简单，只要记录“血统”(每个RDD的transformations流程)。如果某个RDD的分区丢失了，完全可以只恢复这个分区的RDD数据。<h2 id=rdd>RDD</h2><h3 id=rddgai-shu>RDD概述</h3><p>RDD是只读的数据分区集合。每个RDD只有三个来源：<ol><li>从内存对象集合生成<li>从外存数据生成<li>从现有RDD转换</ol><p>用户拿到RDD不一定真实存在，可能只是这个RDD的“血统”。<blockquote><p>A program cannot reference an RDD that it cannot reconstruct after a failure.</blockquote><h3 id=sparkbian-cheng-mo-xing>Spark编程模型</h3><p>spark程序往往起始于通过transformations创建RDD，终止于通过actions处理RDD返回数值结果或者写入存储。<p>RDD不一定是实体的，在action被运行前才被计算，因此可以排排站，吃果果。<h3 id=rdddui-bi-dsmde-you-dian>RDD对比DSM的优点</h3><p>Distributed Shared Memory(DSM): 另一种分布式框架，细粒度内存共享。<p>RDD的优点：<ol><li>更高效的错误容忍度<li>得益于RDD不可变，可以运行时同时备份数据<li>任务可以被调度到离数据物理更近的节点上<li>当内存不够时RDD可以优雅缩减RDD数量规模</ol><h3 id=bu-gua-he-yu-rddde-chang-jing>不适合于RDD的场景</h3><p>RDD只适合于<strong>批处理</strong>应用。<p>RDD不适合于异步细粒度更新共享状态的应用。<h2 id=sparkbian-cheng-jie-kou>Spark编程接口</h2><p>开发人员主要写<code>driver program</code>，用于连接集群中的workers。<h3 id=sparkzhong-rddde-cao-zuo>Spark中RDD的操作</h3><ul><li><code>transformations</code>: 定义RDD的懒操作<li><code>actions</code>: 执行计算，返回结果或者写入存储</ul><h2 id=rddshi-xian>RDD实现</h2><p>提出五个需要实现的接口。<ul><li>partitions()<li>preferredLocations(p)<li>dependencies()<li>iterator(p,parentIters)<li>partitioner()</ul><p>依赖分位窄依赖和宽依赖。<p>为什么要分窄依赖？<ol><li>可以管道执行<li>恢复更简单</ol></div></article></div><div class="column is-2 is-hidden-mobile"><aside style="position: sticky; top: 48px" class=menu><p class="heading has-text-weight-bold">Contents<ul class=menu-list><li><a class="toc is-size-7 is-active" href=https://charmer.fun/posts/paper-reading-rdd/#abstract id=link-abstract> Abstract </a><li><a class="toc is-size-7" href=https://charmer.fun/posts/paper-reading-rdd/#introduction id=link-introduction> Introduction </a><li><a class="toc is-size-7" href=https://charmer.fun/posts/paper-reading-rdd/#rdd id=link-rdd> RDD </a> <ul><li><a class="toc is-size-7" href=https://charmer.fun/posts/paper-reading-rdd/#rddgai-shu id=link-rddgai-shu> RDD概述 </a><li><a class="toc is-size-7" href=https://charmer.fun/posts/paper-reading-rdd/#sparkbian-cheng-mo-xing id=link-sparkbian-cheng-mo-xing> Spark编程模型 </a><li><a class="toc is-size-7" href=https://charmer.fun/posts/paper-reading-rdd/#rdddui-bi-dsmde-you-dian id=link-rdddui-bi-dsmde-you-dian> RDD对比DSM的优点 </a><li><a class="toc is-size-7" href=https://charmer.fun/posts/paper-reading-rdd/#bu-gua-he-yu-rddde-chang-jing id=link-bu-gua-he-yu-rddde-chang-jing> 不适合于RDD的场景 </a></ul><li><a class="toc is-size-7" href=https://charmer.fun/posts/paper-reading-rdd/#sparkbian-cheng-jie-kou id=link-sparkbian-cheng-jie-kou> Spark编程接口 </a> <ul><li><a class="toc is-size-7" href=https://charmer.fun/posts/paper-reading-rdd/#sparkzhong-rddde-cao-zuo id=link-sparkzhong-rddde-cao-zuo> Spark中RDD的操作 </a></ul><li><a class="toc is-size-7" href=https://charmer.fun/posts/paper-reading-rdd/#rddshi-xian id=link-rddshi-xian> RDD实现 </a></ul></aside></div></div></div></section><section class=modal id=search-modal><div class=modal-background></div><div class=modal-card><header class=modal-card-head><p class=modal-card-title>Search</header><section class=modal-card-body><div class="field mb-2"><div class=control><input placeholder="Search this website." class=input id=search type=search></div></div><div class=search-results><div class=search-results__items></div></div></section></div><button class="modal-close is-large" aria-label=close></button></section><section class=section><div class=container><div class="columns is-centered"><div class="column is-8"><nav class=level><div class="level-item has-text-centered"><a class="button is-black is-outlined" href=https://charmer.fun/posts/apache-arrow-the-next-windfall-after-the-data-lake-in-big-data/> <span class="icon mr-2"> <i class="fas fa-arrow-circle-left"></i> </span> Apache Arrow: 大数据在数据湖后的下一个风向标 </a></div><div class="level-item has-text-centered"><a class="button is-black is-outlined" href=https://charmer.fun/posts/paper-reading-hdfs/> 论文阅读笔记：HDFS<span class="icon ml-2"> <i class="fas fa-arrow-circle-right"></i> </span> </a></div></nav></div></div></div></section><section class=section><div class=container><div class="columns is-centered"><div class="column is-6"><div id=disqus_thread></div></div></div></div></section><footer class="footer py-4"><div class="content has-text-centered"><p>Built with <span class=icon-text> <span class=icon> <i class="fas fa-code"></i> </span> <span>code</span> </span> and <span class=icon-text> <span class=icon> <i class="fas fa-heart"></i> </span> <span>love</span> </span><p>Powered by <span class=icon-text> <span class=icon> <i class="fas fa-power-off"></i> </span> <span>zola</span> </span></div></footer><script crossorigin=anonymous integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK src=https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js></script><script crossorigin=anonymous integrity=sha384-QSfwGT8/EU536DKdtyP2D6SLlh8zBaZ0cVkwfrwhqzIU9VCfJT00CLVP5t+HAiYg src=https://cdn.jsdelivr.net/npm/galleria@1.6.1/dist/galleria.min.js></script><script crossorigin=anonymous integrity=sha384-DwpKI+deZB267+hPKwiOIc5Y2GKsVL0mR6hgz7GgIu7AgAMYqJwcJKY1YBNfhWcY src=https://cdn.jsdelivr.net/npm/galleria@1.6.1/dist/themes/folio/galleria.folio.min.js></script><script crossorigin=anonymous integrity=sha384-0yWn54pSGtfKCU+skfA69l25VsCw+MZt4LQov3xNRoS7YkAMrFokGgSBnAWSK4pv src=https://cdn.jsdelivr.net/npm/mermaid@8.13.5/dist/mermaid.min.js></script><script crossorigin=anonymous integrity=sha384-xC3h1+IHXK8seA+8KfT79Z4e0GPsznjXBoMa5nd8ooWKplPyXx92NOmljWxLC/cs src=https://cdn.jsdelivr.net/npm/chart.xkcd@1.1.13/dist/chart.xkcd.min.js></script><script src=https://charmer.fun/elasticlunr.min.js></script><script src=https://charmer.fun/search_index.zh.js></script><script src=https://charmer.fun/js/site.js></script><script>const menuBarHeight = document.querySelector("nav.navbar").clientHeight;
  const tocItems = document.querySelectorAll(".toc");
  const navSections = new Array(tocItems.length);

  tocItems.forEach((el, i) => {
    let id = el.getAttribute("id").substring(5);
    navSections[i] = document.getElementById(id);
  })

  function isVisible(tocIndex) {
    const current = navSections[tocIndex];
    const next = tocIndex < tocItems.length - 1 ? navSections[tocIndex + 1]
      : document.querySelectorAll("section.section").item(1);

    const c = current.getBoundingClientRect();
    const n = next.getBoundingClientRect();
    const h = (window.innerHeight || document.documentElement.clientHeight);

    return (c.top <= h) && (n.top - menuBarHeight >= 0);
  }

  function activateIfVisible() {
    for (b = true, i = 0; i < tocItems.length; i++) {
      if (b && isVisible(i)) {
        tocItems[i].classList.add('is-active');
        b = false;
      } else
        tocItems[i].classList.remove('is-active');
    }
  }

  var isTicking = null;
  window.addEventListener('scroll', () => {
    if (!isTicking) {
      window.requestAnimationFrame(() => {
        activateIfVisible();
        isTicking = false;
      });
      isTicking = true;
    }
  }, false);</script><script>var disqus_config = function () {
    this.page.url = "https://charmer.fun";
    this.page.identifier = "/posts/paper-reading-rdd/";
  };

  (function () {
    var d = document, s = d.createElement('script');
    s.src = 'https://oliverdding.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();</script>