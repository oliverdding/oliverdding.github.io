<?xml version="1.0" encoding="UTF-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
      <title>Aurora - DataStructures</title>
        <link>https://charmer.fun</link>
        <description>Sidere mens eadem mutato</description>
        <generator>Zola</generator>
        <language>zh</language>
        <atom:link href="https://charmer.fun/categories/datastructures/rss.xml" rel="self" type="application/rss+xml"/>
        <lastBuildDate>Wed, 09 Feb 2022 17:13:10 +0800</lastBuildDate>
        <item>
            <title>å¸ƒéš†è¿‡æ»¤å™¨</title>
            <pubDate>Wed, 09 Feb 2022 17:13:10 +0800</pubDate>
            <link>https://charmer.fun/posts/bloom-filter/</link>
            <guid>https://charmer.fun/posts/bloom-filter/</guid>
            <description>&lt;p&gt;å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆBloom Filterï¼‰æ˜¯ä¸€ç§ç±»ä¼¼äºå“ˆå¸Œè¡¨çš„æ•°æ®ç»“æ„ï¼Œä½†ç›¸æ¯”äºåè€…ç©ºé—´åˆ©ç”¨ç‡æ›´é«˜ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨æŸ¥æ‰¾keyæ—¶ï¼Œè¿”å›å€¼å¯èƒ½æƒ…å†µæœ‰ä¸¤ç§ï¼š&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;key&lt;strong&gt;ä¸&lt;&#x2F;strong&gt;å­˜åœ¨&lt;&#x2F;li&gt;
&lt;li&gt;key&lt;strong&gt;å¯èƒ½&lt;&#x2F;strong&gt;å­˜åœ¨&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;h2 id=&quot;yuan-li&quot;&gt;åŸç†&lt;&#x2F;h2&gt;
&lt;p&gt;å¸ƒéš†è¿‡æ»¤å™¨ç”±ä»¥ä¸‹ä¸‰éƒ¨åˆ†æ„æˆï¼š&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;nä¸ªkey&lt;&#x2F;li&gt;
&lt;li&gt;mä½çš„ä½å›¾ï¼š&lt;code&gt;bitmap&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;li&gt;kä¸ªæ— å…³çš„hashå‡½æ•°ï¼š&lt;code&gt;h1, h2, ..., hk&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯ä»¥ç”¨$h_{i}(x)=MD5(x+i)$æˆ–è€…$h_{i}(x)=MD5(x|i)$å®ç°kä¸ªæ— å…³hashå‡½æ•°&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;éœ€è¦æ’å…¥keyæ—¶ï¼Œå¯¹&lt;code&gt;key = a&lt;&#x2F;code&gt;æ—¶ï¼Œç»è¿‡kä¸ªhashå‡½æ•°åå¾—åˆ°&lt;code&gt;h1(a), h2(a), ..., hk(a)&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;p&gt;æ­¤æ—¶å°†&lt;code&gt;bitmap&lt;&#x2F;code&gt;ä¸­å¯¹åº”çš„ä½ç½®1ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;oliverdding&#x2F;imaw.io&#x2F;main&#x2F;inserting-key-into-bloom-filter.drawio.svg&quot; alt=&quot;å¾€å¸ƒéš†è¿‡æ»¤å™¨æ’å…¥æ–°key&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;å½“keyè¶Šæ¥è¶Šå¤šï¼Œ&lt;code&gt;bitmap&lt;&#x2F;code&gt;ä¸­ä¸º1çš„ä½è¶Šå¤šï¼Œå¯¹äºæŸä¸ªä¸å­˜åœ¨çš„keyï¼Œkä¸ªhashå‡½æ•°å¾—åˆ°çš„åæ ‡å¯¹åº”&lt;code&gt;bitmap&lt;&#x2F;code&gt;ä¸­çš„å€¼éƒ½ä¸º1çš„æ¦‚ç‡è¶Šå¤§ï¼Œæ­¤æ—¶å°±å‘ç”Ÿfalse positiveã€‚&lt;&#x2F;p&gt;
&lt;p&gt;é‚£ä¹ˆkå–ä½•å€¼æ—¶ï¼Œfalse positiveå‘ç”Ÿæ¦‚ç‡æœ€å°ï¼Œæ­¤æ—¶æ¦‚ç‡ä¸ºï¼Ÿ&lt;&#x2F;p&gt;
&lt;h2 id=&quot;shu-xue-zheng-ming&quot;&gt;æ•°å­¦è¯æ˜&lt;&#x2F;h2&gt;
&lt;p&gt;å¯¹&lt;code&gt;bitmap&lt;&#x2F;code&gt;éšæœºç½®ä½åï¼Œå¯¹äºä»»æ„ä¸€ä¸ªä½ï¼Œå…¶è¢«ç½®0ã€1çš„æ¦‚ç‡åˆ†åˆ«æ˜¯$P(0) = 1 - \frac{1}{m}$ã€$P(1) = \frac{1}{m}$&lt;&#x2F;p&gt;
&lt;p&gt;å¯¹äºkä¸ªhashå‡½æ•°çš„ç½®ä½åï¼Œå¯¹äºä»»æ„ä¸€ä¸ªä½ï¼Œä»ç„¶æ˜¯0çš„æ¦‚ç‡æ˜¯$$Pâ€™(0)=P(0)^{k}=(1 - \frac{1}{m})^{k}$$&lt;&#x2F;p&gt;
&lt;p&gt;å¯¹äºnä¸ªkeyæ’å…¥åï¼Œå¯¹äºä»»æ„ä¸€ä¸ªä½ï¼Œä»ç„¶æ˜¯0çš„æ¦‚ç‡æ˜¯$$Pâ€™â€˜(0)=Pâ€™(0)^{n}=(1 - \frac{1}{m})^{kn}$$&lt;&#x2F;p&gt;
&lt;p&gt;ç”±äºæœ‰è‡ªç„¶å¯¹æ•°eçš„è®¡ç®—å…¬å¼$$\lim_{n \to \infty}{(1-\frac{1}{x})^{-x}}=e$$&lt;&#x2F;p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥è¿‘ä¼¼è®¡ç®—$Pâ€™â€˜(0)$å¾—åˆ°$$Pâ€™â€™(0)=(1-\frac{1}{m})^{kn}\approx{}e^{-\frac{kn}{m}}$$&lt;&#x2F;p&gt;
&lt;p&gt;å› æ­¤ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªä½ï¼Œå…¶è¢«ç½®1çš„æ¦‚ç‡æ˜¯$$Pâ€™â€˜(1)=1-Pâ€™â€™(0)\approx{}1-e^{-\frac{kn}{m}}$$&lt;&#x2F;p&gt;
&lt;p&gt;å½“alse positiveå‘ç”Ÿæ—¶ï¼Œæ˜¯æŒ‡å®ƒçš„kä¸ªhashå‡½æ•°å¾—åˆ°çš„åæ ‡éƒ½ä¸º1ã€‚ç”±äºkä¸ªhashå‡½æ•°ç›¸äº’ç‹¬ç«‹ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—å‡ºalse positiveçš„æ¦‚ç‡ä¸º$$f=(1-(1-\frac{1}{m})^{kn})^{k}\approx{}(1-e^{-\frac{kn}{m}})^{k}$$&lt;&#x2F;p&gt;
&lt;p&gt;ç”±äºmã€næ˜¯ç”¨æˆ·ç»™å®šçš„å€¼ï¼Œå”¯ä¸€å˜é‡å°±æ˜¯kï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®škçš„å€¼å»æœ€å°åŒ–alse positiveæ¦‚ç‡ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å¦$p=e^{-\frac{kn}{m}}$ï¼Œæˆ‘ä»¬æœ‰$$f=(1-p)^{k}=e^{kln(1-p)}$$&lt;&#x2F;p&gt;
&lt;p&gt;æ­¤æ—¶å˜æ›´ä¸ºæœ€å°çš„$g=kln(1-p)$&lt;&#x2F;p&gt;
&lt;p&gt;æ— ä¸­ç”Ÿæœ‰ä¸‹å¾—åˆ°$$g=kln{}(1-p)=-\frac{m}{n}ln(e^{-\frac{kn}{m}})ln(1-p)=-\frac{m}{n}ln(p)ln(1-p)$$&lt;&#x2F;p&gt;
&lt;p&gt;å¾—çŸ¥å½“$p=\frac{1}{2}$æ—¶gå–å¾—æœ€å°ï¼Œæ­¤æ—¶æœ‰$$k=ln(2\frac{m}{n})$$&lt;&#x2F;p&gt;
&lt;p&gt;æ’å…¥å›$$f=(1-p)^{k}$$å¾—åˆ°alse positiveçš„æœ€å°å€¼ä¸º$$f_{min}=(\frac{1}{2})^{k}\approx{}(0.6185)^{\frac{m}{n}}$$&lt;&#x2F;p&gt;
</description>
        </item>
        <item>
            <title>Apache Arrow: å¤§æ•°æ®åœ¨æ•°æ®æ¹–åçš„ä¸‹ä¸€ä¸ªé£å‘æ ‡</title>
            <pubDate>Thu, 18 Nov 2021 10:59:50 +0800</pubDate>
            <link>https://charmer.fun/posts/apache-arrow-the-next-windfall-after-the-data-lake-in-big-data/</link>
            <guid>https://charmer.fun/posts/apache-arrow-the-next-windfall-after-the-data-lake-in-big-data/</guid>
            <description>&lt;h2 id=&quot;jie-shao&quot;&gt;ä»‹ç»&lt;&#x2F;h2&gt;
&lt;p&gt;æ ¹æ®&lt;a rel=&quot;noopener nofollow noreferrer&quot; target=&quot;_blank&quot; href=&quot;https:&#x2F;&#x2F;arrow.apache.org&#x2F;overview&#x2F;&quot;&gt;å®˜æ–¹æ–‡æ¡£&lt;&#x2F;a&gt;ä»‹ç»ï¼ŒArrowæ˜¯&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;A language-independent columnar memory format for flat and hierarchical data, organized for efficient analytic operations on modern hardware like CPUs and GPUs. The Arrow memory format also supports zero-copy reads for lightning-fast data access without serialization overhead.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;ä¸€å¥è¯æ¦‚æ‹¬ï¼ŒArrowç”¨äºç³»ç»Ÿé—´é«˜æ•ˆäº¤äº’æ•°æ®çš„ç»„ä»¶ã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;arrowde-he-xin-neng-li&quot;&gt;Arrowçš„æ ¸å¿ƒèƒ½åŠ›&lt;&#x2F;h3&gt;
&lt;p&gt;Arrowæœ¬èº«ä¸æ˜¯ä¸€ä¸ªå­˜å‚¨ã€æ‰§è¡Œå¼•æ“ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªäº¤äº’æ•°æ®çš„åŸºç¡€åº“ã€‚æ¯”å¦‚å¯ä»¥ç”¨äºä»¥ä¸‹ç»„ä»¶&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;SQLæ‰§è¡Œå¼•æ“ (e.g., Drill and Impala)&lt;&#x2F;li&gt;
&lt;li&gt;æ•°æ®åˆ†æç³»ç»Ÿ (e.g., Pandas and Spark)&lt;&#x2F;li&gt;
&lt;li&gt;æµå’Œé˜Ÿåˆ—ç³»ç»Ÿ (e.g., Kafka and Storm)&lt;&#x2F;li&gt;
&lt;li&gt;å­˜å‚¨ç³»ç»Ÿ (e.g., Parquet, Kudu, Cassandra and HBase)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bei-jing&quot;&gt;èƒŒæ™¯&lt;&#x2F;h2&gt;
&lt;blockquote&gt;
&lt;p&gt;æ¯ä¸ªäº‹ç‰©çš„äº§ç”Ÿå‘å±•éƒ½æœ‰å…¶å†å²åŸå› ï¼Œå¦‚æœæŠ›å¼€ç›®çš„å»â€œå­¦ä¹ â€ï¼ŒçŠ¹å¦‚ç«¹ç¯®å­æ‰“æ°´-ä¸€åœºç©º&lt;&#x2F;p&gt;
&lt;p align=&quot;right&quot;&gt;- æˆ‘è¯´çš„ ;)&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;è®©æˆ‘ä»¬å›åˆ°2008å¹´ï¼Œæ•…äº‹ä»é‚£å¼€å§‹â€¦&lt;&#x2F;p&gt;
&lt;h3 id=&quot;qi-yin&quot;&gt;èµ·å› &lt;&#x2F;h3&gt;
&lt;p&gt;Wes McKinneyåœ¨2008å¹´å¼€å¯äº†Pandasé¡¹ç›®ï¼Œè¿™ä¸ªpythonä¸­åˆ†æã€æ“ä½œæ•°æ®çš„ç‘å£«å†›åˆ€ã€‚ç´§æ¥ç€åœ¨2014å¹´ï¼ŒWesåŠ å…¥Clouderaå…¬å¸ï¼Œå¹¶ç€æ‰‹ç ”ç©¶å¦‚ä½•è®©pythonå¯ä»¥â€œæ’å…¥â€æ‰€æœ‰çš„å¤§æ•°æ®ç»„ä»¶å’Œæ•°æ®åº“ï¼Œä½†æ˜¯æ¯ä¸ªç³»ç»Ÿéƒ½æœ‰è‡ªå·±æ“ä½œæ•°æ®çš„æ–¹å¼ï¼Œäºæ˜¯ï¼š&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;â€œOh my gosh, Iâ€™m going to have to write a dozen different data converters to marshal data, convert data between Pandas each of these data processing systems from Spark, to Impala, to different file formats and HDFS, so it was basically this overwhelming problem.â€&lt;&#x2F;p&gt;
&lt;p align=&quot;right&quot;&gt;- Wes McKinney&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;é™¤æ­¤ä¹‹å¤–ï¼Œåœ¨å¤§æ•°æ®ç§‘å­¦é¢†åŸŸï¼Œdataframeçš„æ¦‚å¿µéšå¤„å¯è§ï¼Œæ¯ä¸ªæ¡†æ¶éƒ½å°†datafrmeä½œä¸ºé«˜å±‚å®šä¹‰ï¼Œä»£è¡¨ä¸€ä¸ªè¡¨ã€ä¸€ç³»åˆ—APIâ€¦ä½†æ˜¯å…¶åº•å±‚çš„å®ç°å¤©å£¤æ‚¬éš”ï¼ŒWeså®Œå…¨æ— æ³•å¤ç”¨ä»£ç ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;æ— æ³•å…±äº«æ•°æ®&lt;&#x2F;strong&gt;ã€&lt;strong&gt;æ— æ³•å…±äº«ä»£ç &lt;&#x2F;strong&gt;è¿™ä¸¤ä¸ªå¤§éš¾é¢˜æš‚æ—¶å›°ä½äº†Wesã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;fa-zhan&quot;&gt;å‘å±•&lt;&#x2F;h3&gt;
&lt;p&gt;Weså¼€å§‹è®¾è®¡ä¸€ç§table middlewareï¼Œä½œä¸ºä¸åŒç»„ä»¶äº¤æ¢æ•°æ®çš„ä¸­é—´å±‚ï¼Œä¸€ç§è¡¨æ¥å£çš„æ ‡å‡†(standardized table interface)ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ¥ç€æ¥åˆ°2015å¹´ï¼ŒWeså›¢é˜Ÿé‡åˆ°äº†Jacqueså’ŒApache Drillç¤¾åŒºçš„å°ä¼™ä¼´ä»¬ï¼Œä¸¤ä¼™äººä¸è°‹è€Œåˆï¼Œå¼€å§‹äº†åˆä½œã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ç”±äºä¸šç•Œæ²¡æœ‰ç»Ÿä¸€è§„èŒƒçš„å®šä¹‰ï¼Œä»–ä»¬åˆä½œçš„é¦–ä¸ªé¡¹ç›®å°±æ˜¯è®¾è®¡å‡ºäº†ä¸€ä¸ªå†…å­˜è¡¨è§†å›¾çš„æ ‡å‡†ï¼Œå¹¶åœ¨ä¸åŒè¯­è¨€éƒ½ç»™å‡ºå®ç°ä»¥è¯æ˜å¯ä»¥åœ¨ä¸åŒè¯­è¨€ä¸­å…±äº«æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¯ä»¥é«˜æ•ˆåœ°å°†æ•°æ®ä»Javaåˆ°C++ï¼Œæˆ–è€…Pythonã€‚&lt;&#x2F;p&gt;
&lt;p&gt;è‡ªæ­¤ï¼Œarrowé¡¹ç›®åˆ›ç«‹ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;åœ¨é¡¹ç›®æ—©æœŸï¼Œæœ€é‡è¦çš„æ˜¯è®¾è®¡å‡ºä¸€å¥—ä¸è¯­è¨€æ— å…³çš„å†…å­˜è¡¨ç»“æ„ï¼Œå¹¶ä¸€å®šè¦æ–¹ä¾¿åˆ†æå¤„ç†ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜éœ€è¦å°†å„ç§æ ¼å¼ã€ç±»å‹çš„æ•°æ®è½¬æ¢ã€è½¬å‡ºä¸ºè¿™ä¸ªæ ‡å‡†æ ¼å¼çš„åº“ã€‚æœ€åï¼Œè¿˜éœ€è¦ä¸€ä¸ªè®¡ç®—å¤„ç†çš„åº“ï¼Œä»¥ä¾¿äºç›´æ¥åŸºäºarrowè¿›è¡Œå¿«é€Ÿæ•°æ®åˆ†æå¤„ç†ã€‚&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;â€œAn important thing to remember about the project is that itâ€™s front-end agnostic. So itâ€™s not a new data frame library, like Pandas. Itâ€™s not a new database.â€&lt;&#x2F;p&gt;
&lt;p align=&quot;right&quot;&gt;- Wes McKinney&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;æ­¤å¤–ï¼ŒWesåœ¨å’ŒApache Impalaå›¢é˜Ÿåˆä½œçš„æ—¶å€™ï¼Œå‘ç°Impalaçš„ä»£ç ä¸­æœ‰å¤§é‡å’Œpandasåšç›¸ä¼¼äº‹æƒ…çš„ç‰‡æ®µï¼Œæ¯”å¦‚CSVåºåˆ—åŒ–ã€ååºåˆ—åŒ–çš„ï¼ŒI&#x2F;Oå­ç³»ç»Ÿï¼Œè‡ªå·±çš„æŸ¥è¯¢å¼•æ“ï¼Œç”šè‡³è‡ªå·±çš„å‰ç«¯ã€‚åœ¨æœ‰äº†è¿™æ ·ä¸€ä¸ªè¯­è¨€æ— å…³çš„å†…å­˜æ•°æ®æ ¼å¼ï¼Œä»–ä»¬å¼€å§‹æ€è€ƒå¦‚ä½•é¿å…é‡å¤ä»£ç ã€‚&lt;&#x2F;p&gt;
&lt;h2 id=&quot;shi-xian&quot;&gt;å®ç°&lt;&#x2F;h2&gt;
&lt;p&gt;æ•…äº‹è®²å®Œäº†ï¼Œç°åœ¨è®©æˆ‘ä»¬ä¸€èµ·æ¥æ¢ç´¢ä¸‹arrowçš„è®¾è®¡ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;é¢å¯¹ä¸åŒè¯­è¨€ã€ä¸åŒå¤§æ•°æ®ç»„ä»¶ä¹‹é—´çš„å·®å¼‚ï¼Œé¦–å…ˆæˆ‘ä»¬è‚¯å®šéœ€è¦ä¸€ä¸ªä¸­é—´çš„è¡¨ç¤ºæ¥é¿å…æˆ‘ä»¬çš„åç«¯ç›´é¢å·®å¼‚ï¼Œä¹Ÿå°±æ˜¯å‰æ–‡æåˆ°çš„è¯­è¨€æ— å…³çš„å†…å­˜è¡¨è§†å›¾ï¼Œè¿™é‡Œå°±æœ‰ä¸€ä¸ªå¿…é¡»æŒ–æ˜çš„ç‚¹ï¼Œä¸ºäº†æ‰¹é‡æ•°æ®åˆ†æï¼Œæˆ‘ä»¬åº”å½“é€‰æ‹©&lt;strong&gt;åˆ—å¼å­˜å‚¨&lt;&#x2F;strong&gt;ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;i.loli.net&#x2F;2021&#x2F;11&#x2F;13&#x2F;BNGPznF9xUy4qMi.png&quot; alt=&quot;åˆ—å­˜è¡¨æŸ¥è¯¢&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;ä½¿ç”¨åˆ—å­˜çš„æ–¹å¼ä¸ä»…å‡å°‘äº†æ‰«æå†…å­˜çš„pageæ•°ï¼Œè¿˜å¯ä»¥åˆ©ç”¨ç°åœ¨è®¡ç®—æœºSIMD(Single Instruction, Multiple Data)æŒ‡ä»¤è¿›è¡ŒåŠ é€Ÿã€‚&lt;&#x2F;p&gt;
&lt;hr &#x2F;&gt;
&lt;p&gt;æ‰©å±•é˜…è¯» - &lt;a rel=&quot;noopener nofollow noreferrer&quot; target=&quot;_blank&quot; href=&quot;http:&#x2F;&#x2F;dbmsmusings.blogspot.com&#x2F;2017&#x2F;10&#x2F;apache-arrow-vs-parquet-and-orc-do-we.html&quot;&gt;Daniel Abadiçš„å®éªŒ&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Danielåœ¨äºšé©¬é€Šçš„EC2 t2.mediumæœºå™¨ä¸Šåˆ›å»ºäº†ä¸€ä¸ªæœ‰60,000,000è¡Œæ•°æ®çš„å†…å­˜è¡¨ã€‚è¡¨ç”±6ä¸ªint32åˆ—ç»„æˆï¼Œæ•´ä¸ªè¡¨å¤§æ¦‚ç”±1.5GBã€‚ä»–åˆ›å»ºäº†è¡Œè¡¨å’Œåˆ—è¡¨ä¸¤ä¸ªå®ä¾‹ï¼Œå¹¶å¯¹ä¸¤ç§è¡¨è¿›è¡Œç®€å•åœ°filteræŸä¸ªå€¼ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;åœ¨æœªå¼€CPUä¼˜åŒ–çš„æƒ…å†µä¸‹ï¼Œå¾—åˆ°ç»“æœï¼š&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;i.loli.net&#x2F;2021&#x2F;11&#x2F;13&#x2F;wjkzO3cfR1BAdiE.png&quot; alt=&quot;æ— SIMD&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;è¡Œè¡¨å’Œåˆ—è¡¨æŸ¥è¯¢è€—æ—¶ç›¸å·®æ— å‡ ã€‚å¯¹äºè¡Œè¡¨ï¼Œæ¯è¡Œéƒ½éœ€è¦æ‰«æï¼Œå³ä½¿åªä½¿ç”¨åˆ°ç¬¬ä¸€åˆ—ï¼›å¯¹äºåˆ—è¡¨åˆ™åªéœ€è¦æ‰«æç¬¬ä¸€åˆ—ï¼ŒæŒ‰ç†è¯´åˆ—è¡¨åº”è¯¥æ˜¯è¡Œè¡¨çš„6å€å¿«ï¼Œä½†æ˜¯åœ¨è¿™ä¸ªå®éªŒä¸­ç”±äºCPUæ˜¯ç“¶é¢ˆï¼Œè€Œä¸æ˜¯å†…å­˜å‘å¾€CPUçš„æ•°æ®ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ä½†æ˜¯å¼€å¯SIMDåï¼Œç»“æœå¦‚ä¸‹ï¼š&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;i.loli.net&#x2F;2021&#x2F;11&#x2F;13&#x2F;ysv8F1SCMaQHEOw.png&quot; alt=&quot;å¼€SIMD&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;SIMDå¯ä»¥åŒæ—¶æ¯”è¾ƒå¤šä¸ªæ•°å€¼ï¼ˆè¿™é‡Œæ˜¯4ä¸ªæ•°ï¼Œå·®ä¸å¤š3å€å¿«ï¼‰ï¼Œå‡å°‘æ‰“ä¹±æµæ°´çº¿çš„æƒ…å†µ&lt;&#x2F;p&gt;
&lt;hr &#x2F;&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬å¯ä»¥ç»§ç»­è€ƒè™‘å¦‚ä½•è®¾è®¡è¯­è¨€æ— å…³çš„å†…å­˜è¡¨ç»“æ„äº†&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;i.loli.net&#x2F;2021&#x2F;11&#x2F;13&#x2F;Ca6DOkIohglrXx4.png&quot; alt=&quot;ç›´æ¥IPC&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Arrowéœ€è¦ä½œä¸ºé€šç”¨çš„ä¼ è¾“ç»“æ„&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;i.loli.net&#x2F;2021&#x2F;11&#x2F;13&#x2F;uJ5fAIYCXZK9eND.png&quot; alt=&quot;é€šè¿‡arrowäº¤äº’&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;å¯æ˜¯ä»£ç å…±äº«è¯¥å¦‚ä½•å®ç°å‘¢ï¼ŸArrowä¸åº”è¯¥æ˜¯jsonã€protobufä¹‹æµï¼Œåè€…é€‚ç”¨äºç£ç›˜å±‚é¢çš„æ•°æ®å­˜å‚¨äº¤äº’ã€‚Arrowåº”å½“ä½œä¸ºå„ä¸ªè¯­è¨€ã€ç»„ä»¶ä¸­çš„ä¸€ç§æ•°æ®æ ¼å¼åº“ï¼Œåº”è¯¥æ˜¯è¿è¡Œæ—¶çš„æ•°æ®å­˜å‚¨äº¤äº’ï¼ç›´æ¥å¯ä»¥æ“ä½œæ•°æ®ï¼Œå­˜å–ã€è®¡ç®—ï¼š&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;i.loli.net&#x2F;2021&#x2F;11&#x2F;13&#x2F;pGxX76nHLvmNPYy.png&quot; alt=&quot;æ•°æ®æ“ä½œ&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;arrowlie-ge-shi&quot;&gt;Arrowåˆ—æ ¼å¼&lt;&#x2F;h2&gt;
&lt;blockquote&gt;
&lt;p&gt;ğŸš§ æœ¬èŠ‚å†…å®¹ç¿»è¯‘æ•´ç†è‡ªapache&#x2F;arrowä»£ç ä»“åº“ä¸­&lt;a rel=&quot;noopener nofollow noreferrer&quot; target=&quot;_blank&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;apache&#x2F;arrow&#x2F;blob&#x2F;master&#x2F;docs&#x2F;source&#x2F;format&#x2F;Columnar.rst&quot;&gt;Arrow Columnar Formatè§„èŒƒ&lt;&#x2F;a&gt;ã€‚&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Arrowåˆ—æ ¼å¼åŒ…å«ä¸‰éƒ¨åˆ†ï¼šä¸è¯­è¨€æ— å…³çš„å†…å­˜æ•°æ®ç»“æ„è§„èŒƒã€å…ƒæ•°æ®åºåˆ—åŒ–ä»¥åŠä¸€ä¸ªç”¨äºåºåˆ—åŒ–å’Œé€šç”¨æ•°æ®ä¼ è¾“çš„åè®®ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;è¯¥åˆ—æ ¼å¼æ”¯æŒï¼š&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;é¡ºåºè®¿é—®çš„æ•°æ®&lt;&#x2F;li&gt;
&lt;li&gt;O(1)çš„éšæœºè¯»å†™&lt;&#x2F;li&gt;
&lt;li&gt;æ”¯æŒSIMDï¼Œå‘é‡åŒ–æ“ä½œå‹å¥½&lt;&#x2F;li&gt;
&lt;li&gt;å¯é‡æ–°å®šä½è€Œæ— â€œpointer swizzlingâ€é—®é¢˜ï¼Œå…è®¸åœ¨å…±äº«å†…å­˜ä¸­zero-copy&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;hr &#x2F;&gt;
&lt;p&gt;æ‰©å±•é˜…è¯» - &lt;a rel=&quot;noopener nofollow noreferrer&quot; target=&quot;_blank&quot; href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Pointer_swizzling&quot;&gt;pointer swizzling&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;ç®€å•æ¥è¯´ï¼Œå†…å­˜ä¸­æŒ‡é’ˆæ‰€æŒ‡å‘çš„åœ°å€åœ¨å†™å…¥ç£ç›˜ï¼ˆåºåˆ—åŒ–ï¼‰å’Œä»ç£ç›˜è½½å…¥æŒ‡é’ˆæ•°æ®ï¼ˆååºåˆ—åŒ–ï¼‰æ—¶ï¼Œéœ€è¦é€šè¿‡æŸç§æ–¹å¼ï¼ˆswizzlingå’Œunswizzlingï¼‰æ¥ä½¿å¾—æŒ‡é’ˆå­˜å‚¨çš„åœ°å€ä¿¡æ¯æœ‰æ•ˆã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ‰©å±•é˜…è¯» - &lt;a rel=&quot;noopener nofollow noreferrer&quot; target=&quot;_blank&quot; href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Zero-copy&quot;&gt;é›¶æ‹·è´&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;zero-copyï¼ˆé›¶æ‹·è´ï¼‰ä¸æ˜¯æŒ‡çœŸçš„æ²¡æœ‰æ‹·è´äº†ï¼Œè€Œæ˜¯è¯´å‡å°‘äº†ä¸å¿…è¦çš„æ•°æ®æ‹·è´ä¸ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼ˆç³»ç»Ÿè°ƒç”¨ï¼‰ã€‚æ¯”å¦‚æ­£å¸¸æƒ…å†µä¸‹ç”¨æˆ·æ€è¿›ç¨‹å¸Œæœ›ä»ç£ç›˜ä¸­è¯»å–æ•°æ®å¹¶å†™å…¥socketï¼Œæ­¤æ—¶éœ€è¦æ•°æ®æµç»è¿‡ç£ç›˜-&amp;gt;ç³»ç»Ÿæ€å†…å­˜-&amp;gt;ç”¨æˆ·æ€å†…å­˜-&amp;gt;ç³»ç»Ÿæ€å†…å­˜-&amp;gt;socketï¼Œå‘ç”Ÿäº†ä¸¤æ¬¡ç³»ç»Ÿè°ƒç”¨(ç£ç›˜çš„read()å’Œå†™å…¥socketçš„write())ã€‚ä½¿ç”¨ç³»ç»Ÿæä¾›çš„é›¶æ‹·è´å‡½æ•°(æ¯”å¦‚sendfile())åˆ™å¯ä»¥ç¼©å‡ä¸ºç£ç›˜-&amp;gt;ç³»ç»Ÿæ€å†…å­˜-&amp;gt;socketã€‚&lt;&#x2F;p&gt;
&lt;hr &#x2F;&gt;
&lt;p&gt;åœ¨Arrowä¸­ï¼Œæœ€åŸºæœ¬çš„ç»“æ„æ˜¯array(æˆ–è€…å«vectorï¼Œæ˜¯ç”±ä¸€åˆ—ç›¸åŒç±»å‹çš„å€¼ç»„æˆï¼Œé•¿åº¦å¿…é¡»å·²çŸ¥ï¼Œä¸”æœ‰ä¸Šé™ï¼›æ¢ä¸ªå¸¸è§çš„å«æ³•æ˜¯fieldï¼Œå­—æ®µ)ï¼Œæ¯ä¸ªarrayéƒ½æœ‰å¦‚ä¸‹å‡ ä¸ªéƒ¨åˆ†ç»„æˆï¼š&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;é€»è¾‘ä¸Šçš„æ•°æ®ç±»å‹ï¼ˆè®°å½•arrayç±»å‹ï¼‰&lt;&#x2F;li&gt;
&lt;li&gt;ä¸€åˆ—ç¼“å†²åŒºï¼ˆå­˜æ”¾å…·ä½“æ•°å­—ã€nullï¼‰&lt;&#x2F;li&gt;
&lt;li&gt;ä¸€ä¸ªé•¿åº¦ä¸º64ä½å¸¦ç¬¦å·çš„æ•´æ•°ï¼ˆè®°å½•arrayé•¿åº¦ï¼Œä¹Ÿå¯ä»¥æ˜¯32ä½ï¼‰&lt;&#x2F;li&gt;
&lt;li&gt;å¦ä¸€ä¸ªé•¿åº¦ä¸º64ä½çš„å¸¦ç¬¦å·çš„æ•´æ•°ï¼ˆè®°å½•nullå€¼çš„æ•°é‡ï¼‰&lt;&#x2F;li&gt;
&lt;li&gt;ï¼ˆå¯é€‰ï¼‰å­—å…¸ï¼ˆç”¨äºå­—å…¸ç¼–ç çš„arrayï¼‰&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Arrowè¿˜æ”¯æŒåµŒå¥—arrayç±»å‹ï¼Œå…¶å®å°±æ˜¯ä¸€åˆ—arrayç»„æˆï¼Œå®ƒä»¬å«åšå­array(child arrays)ã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;wu-li-nei-cun-bu-ju&quot;&gt;ç‰©ç†å†…å­˜å¸ƒå±€&lt;&#x2F;h3&gt;
&lt;p&gt;æ¯ä¸€ä¸ªé€»è¾‘ç±»å‹éƒ½æœ‰ä¸€ä¸ªå®šä¹‰æ˜ç¡®çš„ç‰©ç†å¸ƒå±€ï¼ŒArrowå®šä¹‰äº†å¦‚ä¸‹ç‰©ç†å¸ƒå±€ï¼š&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Primitive(fixed-size)ï¼šç”¨äºå­˜æ”¾å…·æœ‰ç›¸åŒé•¿åº¦çš„æ•°å€¼&lt;&#x2F;li&gt;
&lt;li&gt;Variable-size Binaryï¼šç”¨äºå­˜æ”¾é•¿åº¦å¯å˜çš„æ•°å€¼ã€‚æ”¯æŒ32ä½å’Œ64ä½çš„é•¿åº¦ç¼–ç &lt;&#x2F;li&gt;
&lt;li&gt;Fixed-size Listï¼šåµŒå¥—ç±»å‹ï¼Œä½†æ˜¯æ¯ä¸ªå­arrayé•¿åº¦å¿…é¡»ç›¸åŒ&lt;&#x2F;li&gt;
&lt;li&gt;Variable-size Listï¼šåµŒå¥—ç±»å‹ï¼Œæ¯ä¸ªå­arrayé•¿åº¦å¯ä»¥ä¸ä¸€è‡´ã€‚æ”¯æŒ32ä½å’Œ64ä½çš„é•¿åº¦ç¼–ç &lt;&#x2F;li&gt;
&lt;li&gt;Structï¼šåµŒå¥—ç±»å‹ï¼Œç”±ä¸€ç»„é•¿åº¦ç›¸åŒçš„å‘½åå­å­—æ®µç»„æˆï¼Œä½†å­å­—æ®µçš„ç±»å‹å¯ä»¥ä¸ä¸€è‡´ã€‚&lt;&#x2F;li&gt;
&lt;li&gt;Spareå’ŒDense Unionï¼šåµŒå¥—ç±»å‹ï¼Œä½†æ˜¯åªæœ‰ä¸€ç»„arrayï¼Œæ¯ä¸ªæ•°å€¼çš„ç±»å‹æ˜¯å­ç±»å‹é›†åˆä¹‹ä¸€&lt;&#x2F;li&gt;
&lt;li&gt;Nullï¼šå­˜æ”¾ä¸€ç»„nullå€¼ï¼Œé€»è¾‘ç±»å‹åªèƒ½æ˜¯null&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;bu-ju-li-zi&quot;&gt;å¸ƒå±€ä¾‹å­&lt;&#x2F;h4&gt;
&lt;p&gt;æœ¬å°èŠ‚ä»¥Fixed-size Primitive Layoutä¸ºä¾‹å­è®²è¿°Arrowæœ€åŸºç¡€çš„å†…å­˜å¸ƒå±€ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å¦‚å‰æ–‡æ‰€è¿°ï¼ŒPrimitiveç±»å‹çš„æ•°å€¼æ§½é•¿åº¦ç›¸åŒï¼Œåªèƒ½å­˜æ”¾å›ºå®šé•¿åº¦çš„æ•°å€¼ï¼Œå¯ä»¥æ˜¯å­—èŠ‚æˆ–è€…æ¯”ç‰¹ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æ”¾åˆ°å…·ä½“å†…å­˜å¸ƒå±€ä¸Šï¼Œæœ¬ç±»å‹åŒ…å«ä¸€ä¸ªè¿ç»­çš„å†…å­˜ç¼“å†²åŒºï¼Œæ€»å¤§å°åˆ™æ˜¯æ§½å®½*é•¿åº¦ï¼ˆå¯¹äºæ¯”ç‰¹çš„æ§½å®½ï¼Œåˆ™éœ€è¦å››èˆäº”å…¥åˆ°å­—èŠ‚ï¼‰ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ç»™å‡ºæ–‡æ¡£ä¸­ä¸€ä¸ªInt32 Arrayçš„ä¾‹å­ï¼š&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#282828;color:#fdf4c1aa;&quot;&gt;&lt;code&gt;&lt;span&gt;[1, null, 2, 4, 8]
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;ä¼šè¿™æ ·è¡¨ç¤ºï¼š&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#282828;color:#fdf4c1aa;&quot;&gt;&lt;code&gt;&lt;span&gt;* Length: 5, Null count: 1
&lt;&#x2F;span&gt;&lt;span&gt;* Validity bitmap buffer:
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  |Byte 0 (validity bitmap) | Bytes 1-63            |
&lt;&#x2F;span&gt;&lt;span&gt;  |-------------------------|-----------------------|
&lt;&#x2F;span&gt;&lt;span&gt;  | 00011101                | 0 (padding)           |
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;* Value Buffer:
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  |Bytes 0-3   | Bytes 4-7   | Bytes 8-11  | Bytes 12-15 | Bytes 16-19 | Bytes 20-63 |
&lt;&#x2F;span&gt;&lt;span&gt;  |------------|-------------|-------------|-------------|-------------|-------------|
&lt;&#x2F;span&gt;&lt;span&gt;  | 1          | unspecified | 2           | 4           | 8           | unspecified |
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;å…¶ä¸­æœ‰æ•ˆæ€§ä½å›¾æ˜¯ç”¨äºè®°å½•æ¯ä¸ªå€¼æ§½æ˜¯å¦ä¸ºç©ºçš„ã€‚å…·ä½“çœ‹&lt;a rel=&quot;noopener nofollow noreferrer&quot; target=&quot;_blank&quot; href=&quot;https:&#x2F;&#x2F;arrow.apache.org&#x2F;docs&#x2F;format&#x2F;Columnar.html#validity-bitmaps&quot;&gt;è§„èŒƒ&lt;&#x2F;a&gt;ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å‰©ä¸‹çš„å¸ƒå±€éƒ½åœ¨Primitiveå¸ƒå±€ä¸Šå˜åŒ–è€Œæ¥ï¼Œå…·ä½“çœ‹è§„èŒƒã€‚&lt;&#x2F;p&gt;
&lt;h4 id=&quot;bu-ju-shi-yong-de-huan-chong-qu&quot;&gt;å¸ƒå±€ä½¿ç”¨çš„ç¼“å†²åŒº&lt;&#x2F;h4&gt;
&lt;p&gt;Arrowçš„å‡ ç§ç‰©ç†å¸ƒå±€ç”¨åˆ°çš„ç¼“å†²åŒºå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š&lt;&#x2F;p&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th align=&quot;center&quot;&gt;&lt;strong&gt;Layout Type&lt;&#x2F;strong&gt;&lt;&#x2F;th&gt;&lt;th align=&quot;center&quot;&gt;&lt;strong&gt;Buffer 0&lt;&#x2F;strong&gt;&lt;&#x2F;th&gt;&lt;th align=&quot;center&quot;&gt;&lt;strong&gt;Buffer 1&lt;&#x2F;strong&gt;&lt;&#x2F;th&gt;&lt;th align=&quot;center&quot;&gt;&lt;strong&gt;Buffer 2&lt;&#x2F;strong&gt;&lt;&#x2F;th&gt;&lt;&#x2F;tr&gt;&lt;&#x2F;thead&gt;&lt;tbody&gt;
&lt;tr&gt;&lt;td align=&quot;center&quot;&gt;Primitive&lt;&#x2F;td&gt;&lt;td align=&quot;center&quot;&gt;validity&lt;&#x2F;td&gt;&lt;td align=&quot;center&quot;&gt;data&lt;&#x2F;td&gt;&lt;td align=&quot;center&quot;&gt;&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td align=&quot;center&quot;&gt;Variable Binary&lt;&#x2F;td&gt;&lt;td align=&quot;center&quot;&gt;validity&lt;&#x2F;td&gt;&lt;td align=&quot;center&quot;&gt;offsets&lt;&#x2F;td&gt;&lt;td align=&quot;center&quot;&gt;data&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td align=&quot;center&quot;&gt;List&lt;&#x2F;td&gt;&lt;td align=&quot;center&quot;&gt;validity&lt;&#x2F;td&gt;&lt;td align=&quot;center&quot;&gt;offsets&lt;&#x2F;td&gt;&lt;td align=&quot;center&quot;&gt;&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td align=&quot;center&quot;&gt;Fixed-size List&lt;&#x2F;td&gt;&lt;td align=&quot;center&quot;&gt;validity&lt;&#x2F;td&gt;&lt;td align=&quot;center&quot;&gt;&lt;&#x2F;td&gt;&lt;td align=&quot;center&quot;&gt;&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td align=&quot;center&quot;&gt;Struct&lt;&#x2F;td&gt;&lt;td align=&quot;center&quot;&gt;validity&lt;&#x2F;td&gt;&lt;td align=&quot;center&quot;&gt;&lt;&#x2F;td&gt;&lt;td align=&quot;center&quot;&gt;&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td align=&quot;center&quot;&gt;Sparse Union&lt;&#x2F;td&gt;&lt;td align=&quot;center&quot;&gt;type ids&lt;&#x2F;td&gt;&lt;td align=&quot;center&quot;&gt;&lt;&#x2F;td&gt;&lt;td align=&quot;center&quot;&gt;&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td align=&quot;center&quot;&gt;Dense Union&lt;&#x2F;td&gt;&lt;td align=&quot;center&quot;&gt;type ids&lt;&#x2F;td&gt;&lt;td align=&quot;center&quot;&gt;offsets&lt;&#x2F;td&gt;&lt;td align=&quot;center&quot;&gt;&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td align=&quot;center&quot;&gt;Null&lt;&#x2F;td&gt;&lt;td align=&quot;center&quot;&gt;&lt;&#x2F;td&gt;&lt;td align=&quot;center&quot;&gt;&lt;&#x2F;td&gt;&lt;td align=&quot;center&quot;&gt;&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;tr&gt;&lt;td align=&quot;center&quot;&gt;Dictionary-encoded&lt;&#x2F;td&gt;&lt;td align=&quot;center&quot;&gt;validity&lt;&#x2F;td&gt;&lt;td align=&quot;center&quot;&gt;data (indices)&lt;&#x2F;td&gt;&lt;td align=&quot;center&quot;&gt;&lt;&#x2F;td&gt;&lt;&#x2F;tr&gt;
&lt;&#x2F;tbody&gt;&lt;&#x2F;table&gt;
&lt;p&gt;Arrowå¦‚ä½•å®ç°O(1)è¯»å†™çš„å‘¢ï¼Ÿ&lt;&#x2F;p&gt;
&lt;p&gt;æ‰€æœ‰çš„ç‰©ç†å¸ƒå±€åº•å±‚éƒ½æ˜¯ç”¨æ•°ç»„å­˜å‚¨æ•°æ®ï¼Œå¹¶ä¸”ä¼šæ ¹æ®å±‚çº§åµŒå¥—å»ºç«‹offsets bitmapï¼Œå½“ç„¶å°±å®ç°äº†O(1)çš„è¯»å†™é€Ÿåº¦äº†ã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;luo-ji-lei-xing&quot;&gt;é€»è¾‘ç±»å‹&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;a rel=&quot;noopener nofollow noreferrer&quot; target=&quot;_blank&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;apache&#x2F;arrow&#x2F;blob&#x2F;master&#x2F;format&#x2F;Schema.fbs&quot;&gt;Schema.fbs&lt;&#x2F;a&gt;å®šä¹‰äº†Arrowæ”¯æŒçš„é€»è¾‘ç±»å‹ï¼Œæ¯ç§é€»è¾‘ç±»å‹éƒ½ä¼šå¯¹åº”åˆ°ä¸€ç§ç‰©ç†å¸ƒå±€ã€‚&lt;&#x2F;p&gt;
&lt;h3 id=&quot;xu-lie-hua-yu-ipc&quot;&gt;åºåˆ—åŒ–ä¸IPC&lt;&#x2F;h3&gt;
&lt;p&gt;åˆ—å¼æ ¼å¼åºåˆ—åŒ–æ—¶æœ€åŸå§‹çš„å•ä½æ˜¯â€œrecord batchâ€œ(ä¹Ÿå°±æ˜¯ä¸€ä¸ªè¡¨ï¼Œtableå•¦)ã€‚ä¸€ä¸ªrecord batchæ˜¯ä¸€ç»„æœ‰åºçš„arrayçš„é›†åˆï¼Œè¢«ç§°ä¸ºrecord batchçš„å­—æ®µ(fields)ã€‚æ¯ä¸ªå­—æ®µ(field)æœ‰ç›¸åŒçš„é•¿åº¦ï¼Œä½†æ˜¯å­—æ®µçš„æ•°æ®ç±»å‹å¯ä»¥ä¸ä¸€æ ·ã€‚record batchçš„å­—æ®µåã€ç±»å‹æ„æˆäº†å®ƒçš„schemaã€‚&lt;&#x2F;p&gt;
&lt;p&gt;æœ¬èŠ‚æè¿°ä¸€ä¸ªåè®®ï¼Œç”¨äºå°†record batchåºåˆ—åŒ–ä¸ºäºŒè¿›åˆ¶æµï¼Œå¹¶å¯ä»¥æ— éœ€å†…å­˜æ‹·è´é‡æ„record batchã€‚&lt;&#x2F;p&gt;
&lt;p&gt;åºåˆ—åŒ–æ—¶ä¼šåˆ†ä¸ºè¿™ä¸‰éƒ¨åˆ†ï¼š&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Schema&lt;&#x2F;li&gt;
&lt;li&gt;RecordBatch&lt;&#x2F;li&gt;
&lt;li&gt;DictionaryBatch&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬åªæåŠå‰ä¸¤ä¸ªã€‚&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;i.loli.net&#x2F;2021&#x2F;11&#x2F;16&#x2F;ptCPLjx7bcWOXmi.png&quot; alt=&quot;å¸ƒå±€&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;ä¸€ä¸ªschema messageå’Œå¤šä¸ªrecord batch messageå°±èƒ½å®Œæ•´è¡¨ç¤ºä¸€ä¸ªrecord batchã€‚å…¶ä¸­schema messageå­˜å‚¨è¡¨ç»“æ„ï¼Œrecord batch messageå­˜å‚¨å­—æ®µmetadataå’Œå­—æ®µå€¼ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œrecord batch messageåŒ…å«å®é™…çš„æ•°æ®ç¼“å†²åŒºã€å¯¹åº”çš„ç‰©ç†å†…å­˜å¸ƒå±€ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;ç„¶åé—®é¢˜åˆæ¥äº†ï¼ŒArrowä¸ºä½•æ— éœ€pointer-swizzlingå³å¯å®ç°æµä¸æ•°æ®è½¬æ¢çš„å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯messageçš„metadataä¸­å­˜å‚¨äº†æ¯ä¸ªç¼“å†²åŒºçš„ä½ç½®å’Œå¤§å°ï¼Œå› æ­¤å¯ä»¥å­—èŠ‚é€šè¿‡æŒ‡é’ˆè®¡ç®—æ¥é‡å»ºArrayæ•°æ®ç»“æ„ï¼ŒåŒæ—¶è¿˜é¿å…äº†å†…å­˜æ‹·è´ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;äºæ˜¯å®šä¹‰IPCæµæ ¼å¼ï¼š&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#282828;color:#fdf4c1aa;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;lt;SCHEMA&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;DICTIONARY 0&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;...
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;DICTIONARY k - 1&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;RECORD BATCH 0&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;...
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;DICTIONARY x DELTA&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;...
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;DICTIONARY y DELTA&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;...
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;RECORD BATCH n - 1&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;EOS [optional]: 0xFFFFFFFF 0x00000000&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;ç”±äºè¿™éƒ¨åˆ†æ¯”è¾ƒâ€œå®šä¹‰â€ï¼Œæœ¬æ–‡ä¸å±•å¼€è®²ï¼Œæ›´è¯¦ç»†è¯·çœ‹&lt;a rel=&quot;noopener nofollow noreferrer&quot; target=&quot;_blank&quot; href=&quot;https:&#x2F;&#x2F;arrow.apache.org&#x2F;docs&#x2F;format&#x2F;Columnar.html#ipc-streaming-format&quot;&gt;è§„èŒƒ&lt;&#x2F;a&gt;ã€‚&lt;&#x2F;p&gt;
&lt;h2 id=&quot;arrow-flight&quot;&gt;Arrow Flight&lt;&#x2F;h2&gt;
&lt;p&gt;è¿‘æ®µæ—¶é—´Arrowæœ€å¤§çš„å˜åŒ–å°±æ˜¯æ·»åŠ äº†Flightï¼Œä¸€ä¸ªé€šç”¨C&#x2F;Sæ¶æ„çš„é«˜æ€§èƒ½æ•°æ®ä¼ è¾“æ¡†æ¶ã€‚FlightåŸºäºgRPCå¼€å‘ï¼Œä»æœ€å¼€å§‹é‡ç‚¹å°±æ˜¯ä¼˜åŒ–Arrowæ ¼å¼æ•°æ®ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;Flightçš„å…·ä½“ç»†èŠ‚è¯·çœ‹&lt;a rel=&quot;noopener nofollow noreferrer&quot; target=&quot;_blank&quot; href=&quot;https:&#x2F;&#x2F;arrow.apache.org&#x2F;blog&#x2F;2019&#x2F;10&#x2F;13&#x2F;introducing-arrow-flight&#x2F;&quot;&gt;å®˜æ–¹æ–‡æ¡£&lt;&#x2F;a&gt;ã€‚è¿™é‡Œåªä»‹ç»å®ƒçš„ä¼˜åŠ¿ï¼š&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;æ— åºåˆ—åŒ–&#x2F;ååºåˆ—åŒ–ï¼šFlightä¼šç›´æ¥å°†å†…å­˜ä¸­çš„Arrowå‘é€ï¼Œä¸è¿›è¡Œä»»ä½•åºåˆ—åŒ–&#x2F;ååºåˆ—åŒ–æ“ä½œ&lt;&#x2F;li&gt;
&lt;li&gt;æ‰¹å¤„ç†ï¼šFlightå¯¹record batchçš„æ“ä½œæ— éœ€è®¿é—®å…·ä½“çš„åˆ—ã€è®°å½•æˆ–è€…å…ƒç´ &lt;&#x2F;li&gt;
&lt;li&gt;é«˜å¹¶å‘ï¼šFlightçš„ååé‡åªæ”¶åˆ°å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„ååé‡ä»¥åŠç½‘ç»œçš„é™åˆ¶&lt;&#x2F;li&gt;
&lt;li&gt;ç½‘ç»œåˆ©ç”¨ç‡é«˜ï¼šFlightä½¿ç”¨åŸºäºHTTP&#x2F;2çš„gRPCï¼Œä¸ä»…æ˜¯å¿«&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;a rel=&quot;noopener nofollow noreferrer&quot; target=&quot;_blank&quot; href=&quot;https:&#x2F;&#x2F;www.dremio.com&#x2F;is-time-to-replace-odbc-jdbc&#x2F;&quot;&gt;å®˜æ–¹ç»™å‡ºçš„æ•°æ®&lt;&#x2F;a&gt;æ˜¯Flightçš„ä¼ è¾“å¤§çº¦æ˜¯æ ‡å‡†ODBCçš„20-50å€ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å¯¹æ¯ä¸ªbatch recordå¹³å‡è¡Œæ•°256Kæ—¶ï¼Œåœ¨å•èŠ‚ç‚¹ä¼ è¾“æ—¶çš„æ€§èƒ½å¯¹æ¯”ï¼ˆå› ä¸ºflightå¤šèŠ‚ç‚¹æ—¶å¯ä»¥å¹³è¡Œä¼ è¾“æ•°æ®æµï¼‰ï¼š&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;i.loli.net&#x2F;2021&#x2F;11&#x2F;16&#x2F;EOrNiXqY9Le2jTy.png&quot; alt=&quot;æ€§èƒ½å¯¹æ¯”&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h3 id=&quot;shi-yong-chang-jing&quot;&gt;ä½¿ç”¨åœºæ™¯&lt;&#x2F;h3&gt;
&lt;p&gt;æœ€è¿‡ç»å…¸çš„é&lt;a rel=&quot;noopener nofollow noreferrer&quot; target=&quot;_blank&quot; href=&quot;https:&#x2F;&#x2F;arrow.apache.org&#x2F;blog&#x2F;2017&#x2F;07&#x2F;26&#x2F;spark-arrow&#x2F;&quot;&gt;PySpark&lt;&#x2F;a&gt;è«å±ï¼Œæ­¤å¤–è¿˜æœ‰&lt;a rel=&quot;noopener nofollow noreferrer&quot; target=&quot;_blank&quot; href=&quot;https:&#x2F;&#x2F;arrow.apache.org&#x2F;blog&#x2F;2019&#x2F;01&#x2F;25&#x2F;r-spark-improvements&#x2F;&quot;&gt;sparklyr&lt;&#x2F;a&gt;ã€‚&lt;&#x2F;p&gt;
&lt;p&gt;å¦å¤–ï¼ŒClickHouseä¹Ÿæœ‰è®¡åˆ’å®ç°Arrow Flightçš„serverç«¯ï¼Œä¸€æ—¦è½åœ°å¯ç”¨ï¼Œsparkä¸clickhouseäº¤äº’å°±å¯ä»¥æŠ›å¼ƒ3Gç½‘èˆ¬çš„JDBCäº†~&lt;&#x2F;p&gt;
&lt;h2 id=&quot;zong-jie&quot;&gt;æ€»ç»“&lt;&#x2F;h2&gt;
&lt;p&gt;æœ¬æ–‡ä»Arrowç«‹é¡¹çš„èƒŒæ™¯å…¥æ‰‹ï¼Œå†åˆ°Arrowå®ç°æ‰€éœ€çš„è®¾è®¡ï¼Œæœ€ååˆ°Arrowå…·ä½“columnaræ ¼å¼å®šä¹‰ï¼Œä»‹ç»äº†Arrowçš„å„ç§ç›¸å…³æ¦‚å¿µã€‚æœ€åè¡¥ä¸Šä¸€å¼ å›¾ä½œä¸ºArrowçš„ä¼˜ç‚¹ã€é™åˆ¶çš„æ€»ç»“ï¼š&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;i.loli.net&#x2F;2021&#x2F;11&#x2F;14&#x2F;i9hQ5wd4sj6y8Tf.png&quot; alt=&quot;æ€»ç»“&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;can-kao&quot;&gt;å‚è€ƒ&lt;&#x2F;h2&gt;
&lt;ol&gt;
&lt;li&gt;Weså’ŒJacquesçš„è§†é¢‘è®¿è°ˆ: &lt;a rel=&quot;noopener nofollow noreferrer&quot; target=&quot;_blank&quot; href=&quot;https:&#x2F;&#x2F;www.dremio.com&#x2F;starting-apache-arrow&#x2F;&quot;&gt;Starting Apache Arrow&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;Arrowèµ·åæŠ•ç¥¨: &lt;a rel=&quot;noopener nofollow noreferrer&quot; target=&quot;_blank&quot; href=&quot;https:&#x2F;&#x2F;docs.google.com&#x2F;spreadsheets&#x2F;d&#x2F;1q6UqluW6SLuMKRwW2TBGBzHfYLlXYm37eKJlIxWQGQM&#x2F;edit#gid=0&quot;&gt;Vector Naming Discussion&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;æ€è·¯æ¥æº: &lt;a rel=&quot;noopener nofollow noreferrer&quot; target=&quot;_blank&quot; href=&quot;https:&#x2F;&#x2F;tech.ipalfish.com&#x2F;blog&#x2F;2020&#x2F;12&#x2F;08&#x2F;apache_arrow_summary&#x2F;&quot;&gt;ä¼´é±¼æŠ€æœ¯å›¢é˜Ÿ&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a rel=&quot;noopener nofollow noreferrer&quot; target=&quot;_blank&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;apache&#x2F;arrow&#x2F;blob&#x2F;master&#x2F;docs&#x2F;source&#x2F;format&#x2F;Columnar.rst&quot;&gt;Arrow Columnar Format&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a rel=&quot;noopener nofollow noreferrer&quot; target=&quot;_blank&quot; href=&quot;https:&#x2F;&#x2F;arrow.apache.org&#x2F;faq&#x2F;&quot;&gt;Arrow FAQ&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
</description>
        </item>
    </channel>
</rss>
